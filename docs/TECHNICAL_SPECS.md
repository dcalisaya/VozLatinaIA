# Especificaciones Técnicas y Requerimientos - VozLatina AI

## 1. Requisitos del Sistema

### Hardware
| Componente | Mínimo (720p) | Recomendado (1080p) | Óptimo (Producción) |
| :--- | :--- | :--- | :--- |
| **GPU** | NVIDIA RTX 3060 (12GB) | NVIDIA RTX 4070 (12GB+) | NVIDIA RTX 5070 Ti / 4090 (16GB+) |
| **VRAM** | 12 GB (con FP16/Int8) | 12 GB | 16 GB+ (FP8 habilitado) |
| **RAM** | 16 GB DDR4 | 32 GB DDR5 | 64 GB DDR5 |
| **CPU** | Ryzen 5 / Intel i5 (Gen 10+) | Ryzen 7 / Intel i7 | Ryzen 9 / Intel i9 |
| **Almacenamiento** | 50 GB SSD SATA | 100 GB NVMe SSD | 1 TB NVMe Gen4 |

### Software
*   **OS**: Windows 10/11 (64-bit). Linux (Ubuntu 22.04+) soportado experimentalmente.
*   **Drivers**: NVIDIA Studio Driver 550.x o superior.
*   **Entorno**: Python 3.10 (aislado), CUDA 12.1, PyTorch 2.2+.

## 2. Especificaciones Funcionales

### Pipeline de Audio (Voz)
*   **Entrada**:
    *   Archivos: `.wav`, `.mp3`, `.flac`, `.ogg` (44.1kHz / 48kHz).
    *   Texto: UTF-8, soporte para caracteres latinos (ñ, tildes).
*   **Procesamiento**:
    *   **TTS (XTTS-v2)**: Generación base en español neutro.
    *   **RVC v2**: Clonación de timbre. Modelos `.pth` (RVC v2) + índice `.index`.
    *   **Post-Proceso**: Normalización -3dB, eliminación de silencio.
*   **Salida**: Audio PCM 16-bit 48kHz mono/stereo.

### Pipeline de Video (Lip-Sync)
*   **Entrada**:
    *   Avatar: Imagen estática `.png`, `.jpg` (512x512 mín, 1080p rec). Rostro frontal, buena iluminación.
*   **Motor**: LivePortrait (Paper 2024).
*   **Parámetros**:
    *   `lip_sync_ratio`: 1.0 (Defecto). Ajustable 0.8 - 1.2 para expresividad.
    *   `relative_motion`: True (Mantiene movimiento de cabeza original del driver si existe, o genera sutil).
*   **Salida**:
    *   Resolución base: 512x512 (nativo LivePortrait).
    *   Upscale: 1920x1080 (RealESRGAN / RIFE para 60fps).
    *   Formato: `.mp4` (H.264, AAC audio).

## 3. Arquitectura del Sistema (MVP)

### Estructura de Archivos
```
/VozLatina
  /models
    /checkpoints (LivePortrait, SD)
    /rvc_models (Voces clonadas .pth)
    /xtts (Voces base)
  /workflows (JSONs de ComfyUI)
  /output (Videos generados)
  /custom_nodes
    /vozlatina_nodes.py (Lógica de negocio)
```

### Gestión de Recursos (VRAM)
*   **Lazy Loading**: Los modelos de Audio (RVC/XTTS) se descargan de la VRAM inmediatamente después de generar el audio final, *antes* de cargar LivePortrait.
*   **Cuantización**:
    *   RVC: FP16.
    *   LivePortrait: FP16 (FP8 en RTX 40/50).

## 4. Seguridad y Limitaciones
*   **Watermarking**: Metadatos XMP invisibles en el output `.mp4` con firma "Generated by VozLatina AI".
## 5. Arquitectura Cliente-Servidor (Recomendada Pro)

Esta configuración desacopla la interfaz de usuario del motor de procesamiento, ideal para entornos híbridos (Laptop ligera + Servidor GPU).

### Topología
*   **Cliente (Frontend)**:
    *   **OS**: Windows 10/11 (o macOS).
    *   **Hardware**: Cualquier laptop moderna (i5, 8GB RAM, Gráficos integrados).
    *   **Rol**: Ejecuta la App Electron, gestiona archivos, envía peticiones API.
*   **Servidor (Backend)**:
    *   **OS**: Ubuntu 22.04 LTS (Recomendado) o Windows.
    *   **Hardware**: GPU NVIDIA dedicada (RTX 3060+).
    *   **Rol**: Ejecuta ComfyUI en modo `--listen`. Procesa inferencia pesada.

### Protocolo de Conexión
*   **Comunicación**: WebSocket (tiempo real) + HTTP REST.
*   **Configuración**:
    *   El usuario introduce la IP del servidor (ej. `http://192.168.1.50:8188`) en la App Electron.
    *   La App verifica conexión y sincroniza la lista de modelos disponibles.
*   **Ventajas**:
    *   Permite usar Mac/Laptops ligeras como clientes.
    *   Centraliza el hardware costoso en un servidor dedicado (headless).

